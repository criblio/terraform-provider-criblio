// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package provider

import (
	"context"
	"encoding/json"
	tfTypes "github.com/criblio/terraform-provider-criblio/internal/provider/types"
	"github.com/criblio/terraform-provider-criblio/internal/sdk/models/shared"
	"github.com/hashicorp/terraform-plugin-framework-jsontypes/jsontypes"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
)

func (r *SystemInfoDataSourceModel) RefreshFromSharedCountedSystemInfo(ctx context.Context, resp *shared.CountedSystemInfo) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		r.Items = []tfTypes.SystemInfo{}

		for _, itemsItem := range resp.Items {
			var items tfTypes.SystemInfo

			items.APIPort = types.Float64Value(itemsItem.APIPort)
			if len(itemsItem.Build) > 0 {
				items.Build = make(map[string]jsontypes.Normalized, len(itemsItem.Build))
				for key, value := range itemsItem.Build {
					result, _ := json.Marshal(value)
					items.Build[key] = jsontypes.NewNormalizedValue(string(result))
				}
			}
			items.Conf.ConfVersion = types.StringPointerValue(itemsItem.Conf.ConfVersion)
			items.Conf.Inputs = types.Float64Value(itemsItem.Conf.Inputs)
			items.Conf.Name = types.StringPointerValue(itemsItem.Conf.Name)
			items.Conf.Outputs = types.Float64Value(itemsItem.Conf.Outputs)
			items.Conf.Pipelines = types.Float64Value(itemsItem.Conf.Pipelines)
			items.Conf.Routes = types.Float64Value(itemsItem.Conf.Routes)
			items.Conf.Rules = types.Float64Value(itemsItem.Conf.Rules)
			items.ConfigPath = types.StringValue(itemsItem.ConfigPath)
			items.DistMode = types.StringValue(string(itemsItem.DistMode))
			items.GUID = types.StringValue(itemsItem.GUID)
			items.Hostname = types.StringValue(itemsItem.Hostname)
			items.InstallPath = types.StringValue(itemsItem.InstallPath)
			items.License.Email = types.StringPointerValue(itemsItem.License.Email)
			items.License.IsRegistered = types.BoolValue(itemsItem.License.IsRegistered)
			items.License.IsSplunkApp = types.BoolPointerValue(itemsItem.License.IsSplunkApp)
			items.License.Limits.EdgeGroups = types.Float64PointerValue(itemsItem.License.Limits.EdgeGroups)
			items.License.Limits.EdgeProcs = types.Float64PointerValue(itemsItem.License.Limits.EdgeProcs)
			items.License.Limits.Kms = types.Float64PointerValue(itemsItem.License.Limits.Kms)
			items.License.Limits.LakeDdss = types.Float64PointerValue(itemsItem.License.Limits.LakeDdss)
			items.License.Limits.Lakehouse = types.Float64PointerValue(itemsItem.License.Limits.Lakehouse)
			items.License.Limits.LeaderResiliency = types.Float64PointerValue(itemsItem.License.Limits.LeaderResiliency)
			items.License.Limits.MaxExecutorsPerSearch = types.Float64PointerValue(itemsItem.License.Limits.MaxExecutorsPerSearch)
			items.License.Limits.Notifications = types.Float64PointerValue(itemsItem.License.Limits.Notifications)
			items.License.Limits.PersistentQueue = types.Float64PointerValue(itemsItem.License.Limits.PersistentQueue)
			items.License.Limits.Projects = types.Float64PointerValue(itemsItem.License.Limits.Projects)
			items.License.Limits.Rbac = types.Float64Value(itemsItem.License.Limits.Rbac)
			items.License.Limits.RemoteAuth = types.Float64Value(itemsItem.License.Limits.RemoteAuth)
			items.License.Limits.RemoteGit = types.Float64Value(itemsItem.License.Limits.RemoteGit)
			items.License.Limits.S3Bundle = types.Float64PointerValue(itemsItem.License.Limits.S3Bundle)
			items.License.Limits.SearchAcceleration = types.Float64PointerValue(itemsItem.License.Limits.SearchAcceleration)
			items.License.Limits.SearchGroups = types.Float64PointerValue(itemsItem.License.Limits.SearchGroups)
			items.License.Limits.SystemEmail = types.Float64PointerValue(itemsItem.License.Limits.SystemEmail)
			items.License.Limits.WorkerGroups = types.Float64Value(itemsItem.License.Limits.WorkerGroups)
			items.License.Limits.WorkerProcs = types.Float64Value(itemsItem.License.Limits.WorkerProcs)
			items.License.Type = types.StringValue(string(itemsItem.License.Type))
			items.Limits.Samples.MaxSize = types.StringValue(itemsItem.Limits.Samples.MaxSize)
			items.Os.Arch = types.StringValue(itemsItem.Os.Arch)
			items.Os.Endianness = types.StringValue(itemsItem.Os.Endianness)
			items.Os.Platform = types.StringValue(itemsItem.Os.Platform)
			items.Os.Release = types.StringValue(itemsItem.Os.Release)
			items.Os.Type = types.StringValue(itemsItem.Os.Type)
			items.SystemConf.InstallType = types.StringValue(itemsItem.SystemConf.InstallType)
			items.SystemConf.Restart = types.StringValue(itemsItem.SystemConf.Restart)
			items.SystemConf.Upgrade = types.StringValue(itemsItem.SystemConf.Upgrade)
			items.Version = types.StringValue(itemsItem.Version)
			items.WorkerProcesses = types.Float64Value(itemsItem.WorkerProcesses)

			r.Items = append(r.Items, items)
		}
	}

	return diags
}
