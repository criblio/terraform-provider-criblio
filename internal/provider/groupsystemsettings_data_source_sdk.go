// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package provider

import (
	"context"
	tfTypes "github.com/criblio/terraform-provider-criblio/internal/provider/types"
	"github.com/criblio/terraform-provider-criblio/internal/sdk/models/operations"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
)

func (r *GroupSystemSettingsDataSourceModel) RefreshFromOperationsGetSystemSettingsConfResponseBody(ctx context.Context, resp *operations.GetSystemSettingsConfResponseBody) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		r.Items = []tfTypes.SystemSettingsConf{}

		for _, itemsItem := range resp.Items {
			var items tfTypes.SystemSettingsConf

			items.API.BaseURL = types.StringPointerValue(itemsItem.API.BaseURL)
			items.API.DisableAPICache = types.BoolPointerValue(itemsItem.API.DisableAPICache)
			items.API.Disabled = types.BoolValue(itemsItem.API.Disabled)
			if itemsItem.API.Headers == nil {
				items.API.Headers = nil
			} else {
				items.API.Headers = &tfTypes.SystemSettingsConfHeaders{}
			}
			items.API.Host = types.StringValue(itemsItem.API.Host)
			items.API.IdleSessionTTL = types.Float64PointerValue(itemsItem.API.IdleSessionTTL)
			items.API.ListenOnPort = types.BoolPointerValue(itemsItem.API.ListenOnPort)
			items.API.LoginRateLimit = types.StringPointerValue(itemsItem.API.LoginRateLimit)
			items.API.Port = types.Float64Value(itemsItem.API.Port)
			items.API.Protocol = types.StringValue(itemsItem.API.Protocol)
			items.API.Scripts = types.BoolPointerValue(itemsItem.API.Scripts)
			items.API.SensitiveFields = make([]types.String, 0, len(itemsItem.API.SensitiveFields))
			for _, v := range itemsItem.API.SensitiveFields {
				items.API.SensitiveFields = append(items.API.SensitiveFields, types.StringValue(v))
			}
			items.API.Ssl.CaPath = types.StringPointerValue(itemsItem.API.Ssl.CaPath)
			items.API.Ssl.CertPath = types.StringValue(itemsItem.API.Ssl.CertPath)
			items.API.Ssl.Disabled = types.BoolValue(itemsItem.API.Ssl.Disabled)
			items.API.Ssl.Passphrase = types.StringValue(itemsItem.API.Ssl.Passphrase)
			items.API.Ssl.PrivKeyPath = types.StringValue(itemsItem.API.Ssl.PrivKeyPath)
			items.API.SsoRateLimit = types.StringPointerValue(itemsItem.API.SsoRateLimit)
			items.API.WorkerRemoteAccess = types.BoolValue(itemsItem.API.WorkerRemoteAccess)
			items.Backups.BackupPersistence = types.StringValue(itemsItem.Backups.BackupPersistence)
			items.Backups.BackupsDirectory = types.StringValue(itemsItem.Backups.BackupsDirectory)
			items.CustomLogo.Enabled = types.BoolValue(itemsItem.CustomLogo.Enabled)
			items.CustomLogo.LogoDescription = types.StringValue(itemsItem.CustomLogo.LogoDescription)
			items.CustomLogo.LogoImage = types.StringValue(itemsItem.CustomLogo.LogoImage)
			items.Pii.EnablePiiDetection = types.BoolValue(itemsItem.Pii.EnablePiiDetection)
			items.Proxy.UseEnvVars = types.BoolValue(itemsItem.Proxy.UseEnvVars)
			items.Rollback.RollbackEnabled = types.BoolValue(itemsItem.Rollback.RollbackEnabled)
			items.Rollback.RollbackRetries = types.Float64PointerValue(itemsItem.Rollback.RollbackRetries)
			items.Rollback.RollbackTimeout = types.Float64PointerValue(itemsItem.Rollback.RollbackTimeout)
			items.Shutdown.DrainTimeout = types.Float64Value(itemsItem.Shutdown.DrainTimeout)
			items.Sni.DisableSNIRouting = types.BoolValue(itemsItem.Sni.DisableSNIRouting)
			if itemsItem.Sockets == nil {
				items.Sockets = nil
			} else {
				items.Sockets = &tfTypes.SystemSettingsConfSockets{}
				items.Sockets.Directory = types.StringPointerValue(itemsItem.Sockets.Directory)
			}
			items.System.Intercom = types.BoolValue(itemsItem.System.Intercom)
			items.System.Upgrade = types.StringValue(string(itemsItem.System.Upgrade))
			items.TLS.DefaultCipherList = types.StringValue(itemsItem.TLS.DefaultCipherList)
			items.TLS.DefaultEcdhCurve = types.StringValue(itemsItem.TLS.DefaultEcdhCurve)
			items.TLS.MaxVersion = types.StringValue(itemsItem.TLS.MaxVersion)
			items.TLS.MinVersion = types.StringValue(itemsItem.TLS.MinVersion)
			items.TLS.RejectUnauthorized = types.BoolValue(itemsItem.TLS.RejectUnauthorized)
			items.UpgradeGroupSettings.IsRolling = types.BoolPointerValue(itemsItem.UpgradeGroupSettings.IsRolling)
			items.UpgradeGroupSettings.Quantity = types.Float64PointerValue(itemsItem.UpgradeGroupSettings.Quantity)
			items.UpgradeGroupSettings.RetryCount = types.Float64PointerValue(itemsItem.UpgradeGroupSettings.RetryCount)
			items.UpgradeGroupSettings.RetryDelay = types.Float64PointerValue(itemsItem.UpgradeGroupSettings.RetryDelay)
			items.UpgradeSettings.AutomaticUpgradeCheckPeriod = types.StringPointerValue(itemsItem.UpgradeSettings.AutomaticUpgradeCheckPeriod)
			items.UpgradeSettings.DisableAutomaticUpgrade = types.BoolValue(itemsItem.UpgradeSettings.DisableAutomaticUpgrade)
			items.UpgradeSettings.EnableLegacyEdgeUpgrade = types.BoolValue(itemsItem.UpgradeSettings.EnableLegacyEdgeUpgrade)
			items.UpgradeSettings.PackageUrls = []tfTypes.UpgradePackageUrls{}

			for _, packageUrlsItem := range itemsItem.UpgradeSettings.PackageUrls {
				var packageUrls tfTypes.UpgradePackageUrls

				packageUrls.PackageHashURL = types.StringPointerValue(packageUrlsItem.PackageHashURL)
				packageUrls.PackageURL = types.StringValue(packageUrlsItem.PackageURL)

				items.UpgradeSettings.PackageUrls = append(items.UpgradeSettings.PackageUrls, packageUrls)
			}
			items.UpgradeSettings.UpgradeSource = types.StringValue(itemsItem.UpgradeSettings.UpgradeSource)
			items.Workers.Count = types.Float64Value(itemsItem.Workers.Count)
			items.Workers.EnableHeapSnapshots = types.BoolPointerValue(itemsItem.Workers.EnableHeapSnapshots)
			items.Workers.LoadThrottlePerc = types.Float64PointerValue(itemsItem.Workers.LoadThrottlePerc)
			items.Workers.Memory = types.Float64Value(itemsItem.Workers.Memory)
			items.Workers.Minimum = types.Float64Value(itemsItem.Workers.Minimum)
			items.Workers.StartupMaxConns = types.Float64PointerValue(itemsItem.Workers.StartupMaxConns)
			items.Workers.StartupThrottleTimeout = types.Float64PointerValue(itemsItem.Workers.StartupThrottleTimeout)
			items.Workers.V8SingleThread = types.BoolPointerValue(itemsItem.Workers.V8SingleThread)

			r.Items = append(r.Items, items)
		}
	}

	return diags
}

func (r *GroupSystemSettingsDataSourceModel) ToOperationsGetSystemSettingsConfRequest(ctx context.Context) (*operations.GetSystemSettingsConfRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var groupID string
	groupID = r.GroupID.ValueString()

	out := operations.GetSystemSettingsConfRequest{
		GroupID: groupID,
	}

	return &out, diags
}
