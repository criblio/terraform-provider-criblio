// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"fmt"
	"github.com/criblio/terraform-provider-criblio/internal/sdk/internal/utils"
)

type MetricType string

const (
	// MetricTypeCounter Counter
	MetricTypeCounter MetricType = "counter"
	// MetricTypeTimer Timer
	MetricTypeTimer MetricType = "timer"
	// MetricTypeGauge Gauge
	MetricTypeGauge MetricType = "gauge"
	// MetricTypeDistribution Distribution
	MetricTypeDistribution MetricType = "distribution"
	// MetricTypeSummary Summary
	MetricTypeSummary MetricType = "summary"
	// MetricTypeHistogram Histogram
	MetricTypeHistogram MetricType = "histogram"
)

func (e MetricType) ToPointer() *MetricType {
	return &e
}
func (e *MetricType) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "counter":
		fallthrough
	case "timer":
		fallthrough
	case "gauge":
		fallthrough
	case "distribution":
		fallthrough
	case "summary":
		fallthrough
	case "histogram":
		*e = MetricType(v)
		return nil
	default:
		return fmt.Errorf("invalid value for MetricType: %v", v)
	}
}

type FunctionConfSchemaPublishMetricsField struct {
	// The name of the field in the event that contains the metric value
	InFieldName string `json:"inFieldName"`
	// JavaScript expression to evaluate the metric field name. Defaults to Event Field Name.
	OutFieldExpr *string    `json:"outFieldExpr,omitempty"`
	MetricType   MetricType `json:"metricType"`
}

func (f FunctionConfSchemaPublishMetricsField) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(f, "", false)
}

func (f *FunctionConfSchemaPublishMetricsField) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &f, "", false, []string{"inFieldName", "metricType"}); err != nil {
		return err
	}
	return nil
}

func (f *FunctionConfSchemaPublishMetricsField) GetInFieldName() string {
	if f == nil {
		return ""
	}
	return f.InFieldName
}

func (f *FunctionConfSchemaPublishMetricsField) GetOutFieldExpr() *string {
	if f == nil {
		return nil
	}
	return f.OutFieldExpr
}

func (f *FunctionConfSchemaPublishMetricsField) GetMetricType() MetricType {
	if f == nil {
		return MetricType("")
	}
	return f.MetricType
}

type FunctionConfSchemaPublishMetrics struct {
	// List of metrics from event to extract and format. Formatted metrics can be used by a destination to pass metrics to a metrics aggregation platform.
	Fields []FunctionConfSchemaPublishMetricsField `json:"fields,omitempty"`
	// Overwrite previous metric specs. Leave disabled to append.
	Overwrite *bool `json:"overwrite,omitempty"`
	// Optional list of dimensions to include in events. Wildcards supported. If you don't specify metrics, values will be appended to every metric found in the event. When you add a new metric, dimensions will be present only in those new metrics.
	Dimensions []string `json:"dimensions,omitempty"`
	// Optional list of metric field names to look for when removing metrics. When a metric's field name matches an element in this list, the metric will be removed from the event.
	RemoveMetrics []string `json:"removeMetrics,omitempty"`
	// Optional list of dimensions to remove from every metric found in the event. Wildcards supported.
	RemoveDimensions []string `json:"removeDimensions,omitempty"`
}

func (f FunctionConfSchemaPublishMetrics) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(f, "", false)
}

func (f *FunctionConfSchemaPublishMetrics) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &f, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (f *FunctionConfSchemaPublishMetrics) GetFields() []FunctionConfSchemaPublishMetricsField {
	if f == nil {
		return nil
	}
	return f.Fields
}

func (f *FunctionConfSchemaPublishMetrics) GetOverwrite() *bool {
	if f == nil {
		return nil
	}
	return f.Overwrite
}

func (f *FunctionConfSchemaPublishMetrics) GetDimensions() []string {
	if f == nil {
		return nil
	}
	return f.Dimensions
}

func (f *FunctionConfSchemaPublishMetrics) GetRemoveMetrics() []string {
	if f == nil {
		return nil
	}
	return f.RemoveMetrics
}

func (f *FunctionConfSchemaPublishMetrics) GetRemoveDimensions() []string {
	if f == nil {
		return nil
	}
	return f.RemoveDimensions
}
