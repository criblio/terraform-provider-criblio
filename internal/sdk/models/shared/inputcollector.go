// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"errors"
	"fmt"
	"github.com/criblio/terraform-provider-criblio/internal/sdk/internal/utils"
)

type InputCollectorType string

const (
	InputCollectorTypeInputCollectorSplunk      InputCollectorType = "InputCollectorSplunk"
	InputCollectorTypeInputCollectorRest        InputCollectorType = "InputCollectorRest"
	InputCollectorTypeInputCollectorS3          InputCollectorType = "InputCollectorS3"
	InputCollectorTypeInputCollectorAzureBlob   InputCollectorType = "InputCollectorAzureBlob"
	InputCollectorTypeInputCollectorCriblLake   InputCollectorType = "InputCollectorCriblLake"
	InputCollectorTypeInputCollectorDatabase    InputCollectorType = "InputCollectorDatabase"
	InputCollectorTypeInputCollectorGCS         InputCollectorType = "InputCollectorGCS"
	InputCollectorTypeInputCollectorHealthCheck InputCollectorType = "InputCollectorHealthCheck"
)

type InputCollector struct {
	InputCollectorSplunk      *InputCollectorSplunk      `queryParam:"inline,name=InputCollector"`
	InputCollectorRest        *InputCollectorRest        `queryParam:"inline,name=InputCollector"`
	InputCollectorS3          *InputCollectorS3          `queryParam:"inline,name=InputCollector"`
	InputCollectorAzureBlob   *InputCollectorAzureBlob   `queryParam:"inline,name=InputCollector"`
	InputCollectorCriblLake   *InputCollectorCriblLake   `queryParam:"inline,name=InputCollector"`
	InputCollectorDatabase    *InputCollectorDatabase    `queryParam:"inline,name=InputCollector"`
	InputCollectorGCS         *InputCollectorGCS         `queryParam:"inline,name=InputCollector"`
	InputCollectorHealthCheck *InputCollectorHealthCheck `queryParam:"inline,name=InputCollector"`

	Type InputCollectorType
}

func CreateInputCollectorInputCollectorSplunk(inputCollectorSplunk InputCollectorSplunk) InputCollector {
	typ := InputCollectorTypeInputCollectorSplunk

	return InputCollector{
		InputCollectorSplunk: &inputCollectorSplunk,
		Type:                 typ,
	}
}

func CreateInputCollectorInputCollectorRest(inputCollectorRest InputCollectorRest) InputCollector {
	typ := InputCollectorTypeInputCollectorRest

	return InputCollector{
		InputCollectorRest: &inputCollectorRest,
		Type:               typ,
	}
}

func CreateInputCollectorInputCollectorS3(inputCollectorS3 InputCollectorS3) InputCollector {
	typ := InputCollectorTypeInputCollectorS3

	return InputCollector{
		InputCollectorS3: &inputCollectorS3,
		Type:             typ,
	}
}

func CreateInputCollectorInputCollectorAzureBlob(inputCollectorAzureBlob InputCollectorAzureBlob) InputCollector {
	typ := InputCollectorTypeInputCollectorAzureBlob

	return InputCollector{
		InputCollectorAzureBlob: &inputCollectorAzureBlob,
		Type:                    typ,
	}
}

func CreateInputCollectorInputCollectorCriblLake(inputCollectorCriblLake InputCollectorCriblLake) InputCollector {
	typ := InputCollectorTypeInputCollectorCriblLake

	return InputCollector{
		InputCollectorCriblLake: &inputCollectorCriblLake,
		Type:                    typ,
	}
}

func CreateInputCollectorInputCollectorDatabase(inputCollectorDatabase InputCollectorDatabase) InputCollector {
	typ := InputCollectorTypeInputCollectorDatabase

	return InputCollector{
		InputCollectorDatabase: &inputCollectorDatabase,
		Type:                   typ,
	}
}

func CreateInputCollectorInputCollectorGCS(inputCollectorGCS InputCollectorGCS) InputCollector {
	typ := InputCollectorTypeInputCollectorGCS

	return InputCollector{
		InputCollectorGCS: &inputCollectorGCS,
		Type:              typ,
	}
}

func CreateInputCollectorInputCollectorHealthCheck(inputCollectorHealthCheck InputCollectorHealthCheck) InputCollector {
	typ := InputCollectorTypeInputCollectorHealthCheck

	return InputCollector{
		InputCollectorHealthCheck: &inputCollectorHealthCheck,
		Type:                      typ,
	}
}

func (u *InputCollector) UnmarshalJSON(data []byte) error {

	var candidates []utils.UnionCandidate

	// Collect all valid candidates
	var inputCollectorSplunk InputCollectorSplunk = InputCollectorSplunk{}
	if err := utils.UnmarshalJSON(data, &inputCollectorSplunk, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  InputCollectorTypeInputCollectorSplunk,
			Value: &inputCollectorSplunk,
		})
	}

	var inputCollectorRest InputCollectorRest = InputCollectorRest{}
	if err := utils.UnmarshalJSON(data, &inputCollectorRest, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  InputCollectorTypeInputCollectorRest,
			Value: &inputCollectorRest,
		})
	}

	var inputCollectorS3 InputCollectorS3 = InputCollectorS3{}
	if err := utils.UnmarshalJSON(data, &inputCollectorS3, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  InputCollectorTypeInputCollectorS3,
			Value: &inputCollectorS3,
		})
	}

	var inputCollectorAzureBlob InputCollectorAzureBlob = InputCollectorAzureBlob{}
	if err := utils.UnmarshalJSON(data, &inputCollectorAzureBlob, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  InputCollectorTypeInputCollectorAzureBlob,
			Value: &inputCollectorAzureBlob,
		})
	}

	var inputCollectorCriblLake InputCollectorCriblLake = InputCollectorCriblLake{}
	if err := utils.UnmarshalJSON(data, &inputCollectorCriblLake, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  InputCollectorTypeInputCollectorCriblLake,
			Value: &inputCollectorCriblLake,
		})
	}

	var inputCollectorDatabase InputCollectorDatabase = InputCollectorDatabase{}
	if err := utils.UnmarshalJSON(data, &inputCollectorDatabase, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  InputCollectorTypeInputCollectorDatabase,
			Value: &inputCollectorDatabase,
		})
	}

	var inputCollectorGCS InputCollectorGCS = InputCollectorGCS{}
	if err := utils.UnmarshalJSON(data, &inputCollectorGCS, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  InputCollectorTypeInputCollectorGCS,
			Value: &inputCollectorGCS,
		})
	}

	var inputCollectorHealthCheck InputCollectorHealthCheck = InputCollectorHealthCheck{}
	if err := utils.UnmarshalJSON(data, &inputCollectorHealthCheck, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  InputCollectorTypeInputCollectorHealthCheck,
			Value: &inputCollectorHealthCheck,
		})
	}

	if len(candidates) == 0 {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for InputCollector", string(data))
	}

	// Pick the best candidate using multi-stage filtering
	best := utils.PickBestCandidate(candidates)
	if best == nil {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for InputCollector", string(data))
	}

	// Set the union type and value based on the best candidate
	u.Type = best.Type.(InputCollectorType)
	switch best.Type {
	case InputCollectorTypeInputCollectorSplunk:
		u.InputCollectorSplunk = best.Value.(*InputCollectorSplunk)
		return nil
	case InputCollectorTypeInputCollectorRest:
		u.InputCollectorRest = best.Value.(*InputCollectorRest)
		return nil
	case InputCollectorTypeInputCollectorS3:
		u.InputCollectorS3 = best.Value.(*InputCollectorS3)
		return nil
	case InputCollectorTypeInputCollectorAzureBlob:
		u.InputCollectorAzureBlob = best.Value.(*InputCollectorAzureBlob)
		return nil
	case InputCollectorTypeInputCollectorCriblLake:
		u.InputCollectorCriblLake = best.Value.(*InputCollectorCriblLake)
		return nil
	case InputCollectorTypeInputCollectorDatabase:
		u.InputCollectorDatabase = best.Value.(*InputCollectorDatabase)
		return nil
	case InputCollectorTypeInputCollectorGCS:
		u.InputCollectorGCS = best.Value.(*InputCollectorGCS)
		return nil
	case InputCollectorTypeInputCollectorHealthCheck:
		u.InputCollectorHealthCheck = best.Value.(*InputCollectorHealthCheck)
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for InputCollector", string(data))
}

func (u InputCollector) MarshalJSON() ([]byte, error) {
	if u.InputCollectorSplunk != nil {
		return utils.MarshalJSON(u.InputCollectorSplunk, "", true)
	}

	if u.InputCollectorRest != nil {
		return utils.MarshalJSON(u.InputCollectorRest, "", true)
	}

	if u.InputCollectorS3 != nil {
		return utils.MarshalJSON(u.InputCollectorS3, "", true)
	}

	if u.InputCollectorAzureBlob != nil {
		return utils.MarshalJSON(u.InputCollectorAzureBlob, "", true)
	}

	if u.InputCollectorCriblLake != nil {
		return utils.MarshalJSON(u.InputCollectorCriblLake, "", true)
	}

	if u.InputCollectorDatabase != nil {
		return utils.MarshalJSON(u.InputCollectorDatabase, "", true)
	}

	if u.InputCollectorGCS != nil {
		return utils.MarshalJSON(u.InputCollectorGCS, "", true)
	}

	if u.InputCollectorHealthCheck != nil {
		return utils.MarshalJSON(u.InputCollectorHealthCheck, "", true)
	}

	return nil, errors.New("could not marshal union type InputCollector: all fields are null")
}
